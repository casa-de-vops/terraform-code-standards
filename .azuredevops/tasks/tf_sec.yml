# Azure YAML Pipeline Template Documentation
#
# Overview:
#
# This template runs security tools against the Terraform files in the specified working directory.
#
# Assumptions:
#
# This template assumes that the necessary Terraform files are present in the working directory.
#

parameters:
  - name: working_directory
    type: string
  - name: command_option_args
    type: string
    default: ''

steps:
  - task: MicrosoftSecurityDevOps@1
    displayName: 'Run Defender for AzureDevOps'
    inputs:
      workingDirectory: ${{ parameters.working_directory }}
  - task: tfsec@1
    inputs:
      dir: ${{ parameters.working_directory }}
      args: ${{ parameters.command_option_args }}