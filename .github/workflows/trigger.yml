# .github/workflows/trigger.yml
name: Trigger Terraform Orchestration

on:
  push:
    branches:
      - github_actions
  workflow_dispatch:


jobs:
  tf-orchestrations:
    uses: casa-de-vops/terraform-code-standards/.github/workflows/stages.deploy.yml@github_actions
    with:
      tf_version: 'latest'
      working_directory: './terraform/'
      environment: 'dev'
      gh_environment: 'nonprod'
      backend_configs: |
        {
          "backend_service_connection": "terraform",
          "backend_azure_rm_resource_group_name": "rg-terraform-ops",
          "backend_azure_rm_storage_account_name": "casadevopsterraform",
          "backend_azure_rm_container_name": "ops-terraform-state",
          "backend_azure_rm_key": "pipeline-test.dev.tfstate"
        }
      var_file: './environments/dev.tfvars'
